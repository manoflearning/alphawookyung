
#include <bits/stdc++.h>
using namespace std;

const int MAX = 202020, MAXD = 18;

int m, sp[MAX][MAXD + 1];

int main() {
	cin.tie(NULL); cout.tie(NULL);
	ios_base::sync_with_stdio(false);

	cin >> m;
	for (int i = 1; i <= m; i++) cin >> sp[i][0];

	for (int i = 1; i <= MAXD; i++) {
		for (int j = 1; j <= m; j++) {
			sp[j][i] = sp[sp[j][i - 1]][i - 1];
		}
	}

	int q; cin >> q;
	while (q--) {
		int n, x;
		cin >> n >> x;
		for (int i = MAXD; i >= 0; i--) {
			if (n & (1 << i)) x = sp[x][i];
		}
		cout << x << '\n';
	}

	return 0;
}