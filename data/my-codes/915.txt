#define _USE_MATH_DEFINES
#include <bits/stdc++.h>
#include <cassert>
using namespace std;
#define ll long long
#define pii pair<int, int>
#define pll pair<ll, ll>
#define vi vector<int>
#define vvi vector<vector<int>>

const int INF = 1e9 + 7;
const int MOD = 1e9 + 7;
const int dy[] = { 0, 0, 1, -1 };
const int dx[] = { 1, -1, 0, 0 };

struct wv {
    int w, v;
};

struct vbc {
    int v, b, c;
};

const int MAXN = 105;

int n, m, a;
int isJ[MAXN], Hash[MAXN], visited[MAXN][1 << 14];
vector<wv> adj[MAXN];

void input() {
    cin >> n >> m >> a;
    
    for (int i = 0; i < a; i++) {
        int x; cin >> x;
        isJ[x] = 1;
        Hash[x] = i;
    }
    
    for (int i = 0; i < m; i++) {
        int u, v, w;
        cin >> u >> v >> w;
        adj[u].push_back({ w, v });
        adj[v].push_back({ w, u });
    }
}

int bfs() {
    int ret = 0;
    
    queue<vbc> q;
    
    q.push({ 1, 0, 0 });
    visited[1][0] = 1;
    
    while (!q.empty()) {
        int v = q.front().v, b = q.front().b, c = q.front().c;
        q.pop();
        
        for (auto& i : adj[v]) {
            if (i.w < c) continue;
            
            if (i.v == 1) {
                ret = max(ret, c + isJ[1]);
                continue;
            }
            
            if (isJ[i.v]) {
                if (!visited[i.v][b]) {
                    q.push({ i.v, b, c });
                    visited[i.v][b] = 1;
                }
                if (!visited[i.v][b | (1 << Hash[i.v])]) {
                    q.push({ i.v, b | (1 << Hash[i.v]), c + 1 });
                    visited[i.v][b | (1 << Hash[i.v])] = 1;
                }
            }
            else {
                if (!visited[i.v][b]) {
                    q.push({ i.v, b, c });
                    visited[i.v][b] = 1;
                }
            }
        }
    }
    
    return ret;
}

int main() {
	cin.tie(NULL); cout.tie(NULL);
	ios_base::sync_with_stdio(false);
	
	input();
	
	cout << bfs();
	
	return 0;
}
